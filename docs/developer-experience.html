<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer Experience Health Check - Pair to Peer AI Workflows</title>
    
    <!-- OpenGraph Meta Tags -->
    <meta property="og:title" content="Developer Experience Health Check - AI Workflow Satisfaction Survey">
    <meta property="og:description" content="Monthly 25-question survey measuring AI tool satisfaction, learning velocity, and trust. Get real-time health indicators and red flag warnings for your team.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://andreagriffiths11.github.io/pair-to-peer-ai-workflows/developer-experience.html">
    <meta property="og:site_name" content="Pair to Peer AI Workflows">
    <meta name="description" content="Measure experience over output. Track developer confidence, AI fluency balance, and satisfaction to prevent burnout and skill atrophy.">
    <meta name="keywords" content="developer experience, AI satisfaction survey, team health, developer productivity, AI dependency assessment">
    <meta name="author" content="Andrea Griffiths">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; script-src 'self' 'unsafe-inline';">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta name="referrer" content="same-origin">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.ico">

    <link rel="stylesheet" href="css/clean-minimal-theme.css">
    <link rel="stylesheet" href="css/interactive-components.css">

    <style>
        /* Page-specific styles (header now in base CSS) */
    </style>

</head>
<body>
    <!-- Mobile progress bar -->
    <div class="mobile-progress-bar">
        <div class="progress-indicator" id="mobileProgressIndicator"></div>
    </div>
    
    <!-- Back to top button -->
    <button id="backToTop" class="back-to-top-btn" aria-label="Back to top">‚Üë</button>
    
    <div class="container">
        <nav class="desktop-nav" role="navigation" aria-label="Main navigation">
            <ul>
                <li><a href="index.html">Decision Tree</a></li>
                <li><a href="team-assessment.html">Team Assessment</a></li>
                <li><a href="teaching-moments.html">Teaching Moments</a></li>
                <li><a href="developer-experience.html" class="active" aria-current="page">Developer Experience</a></li>
                <li><a href="resources.html">Resources</a></li>
            </ul>
        </nav>
        
        <nav class="mobile-nav" role="navigation" aria-label="Mobile navigation">
            <button class="menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                <span class="hamburger-icon"></span>
            </button>
            <div class="mobile-menu">
                <a href="index.html">Decision Tree</a>
                <a href="team-assessment.html">Team Assessment</a>
                <a href="teaching-moments.html">Teaching Moments</a>
                <a href="developer-experience.html" class="active" aria-current="page">Developer Experience</a>
                <a href="resources.html">Resources</a>
            </div>
        </nav>

        <header role="banner">
            <h1>Developer Experience <span class="accent">Health Check</span></h1>
            <p>Monthly AI workflow survey measuring satisfaction, learning, and quality confidence</p>
        </header>

        <main role="main">
            <!-- Welcome Section -->
            <div class="welcome-section" id="welcomeSection">
                <div class="welcome-title">AI Workflow Health Assessment</div>
                <div class="welcome-description">
                    This survey measures the human side of AI adoption‚Äîconfidence, learning velocity, 
                    and satisfaction. Takes 8-10 minutes and provides actionable insights for team health.
                </div>
                <button class="start-btn" onclick="startSurvey()">Start Health Check</button>
            </div>

            <!-- Progress Section -->
            <div class="progress-section hidden" id="progressSection">
                <div class="progress-header">
                    <div class="progress-title">Survey Progress: <span id="progressText">0%</span></div>
                    <div class="section-indicator">
                        Section <span id="currentSectionNum">1</span> of <span id="totalSectionsNum">6</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
                <div class="category-scores">
                    <div class="category-score">
                        <div class="category-value" id="integrationScore">-</div>
                        <div class="category-label">AI Integration &amp; Agents</div>
                    </div>
                    <div class="category-score">
                        <div class="category-value" id="skillScore">-</div>
                        <div class="category-label">Skill Balance &amp; PR Review</div>
                    </div>
                    <div class="category-score">
                        <div class="category-value" id="learningScore">-</div>
                        <div class="category-label">Learning Velocity</div>
                    </div>
                    <div class="category-score">
                        <div class="category-value" id="qualityScore">-</div>
                        <div class="category-label">Quality Confidence</div>
                    </div>
                    <div class="category-score">
                        <div class="category-value" id="teamScore">-</div>
                        <div class="category-label">Team Process &amp; Guardrails</div>
                    </div>
                </div>
            </div>

            <!-- Survey Sections -->
            <div class="survey-section hidden" id="section1">
                <div class="section-title">AI Tool Integration & Satisfaction</div>
                
                <div class="question">
                    <div class="question-text">1. I can easily integrate AI coding tools into my daily workflow</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(1, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(1, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(1, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(1, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(1, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">2. AI tools help me focus on more satisfying work</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(2, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(2, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(2, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(2, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(2, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">3. I trust the suggestions provided by AI coding assistants</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(3, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(3, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(3, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(3, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(3, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">4. AI tools reduce the mental effort required for repetitive tasks</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(4, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(4, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(4, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(4, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(4, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">5. I feel confident reviewing and modifying AI-generated code</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(5, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(5, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(5, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(5, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(5, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">6. I feel confident delegating routine tasks to AI agents (e.g., Copilot coding agent)</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(6, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(6, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(6, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(6, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(6, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">7. My team has clear guidelines for when to use agent mode vs. edit mode vs. chat</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(7, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(7, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(7, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(7, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(7, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn secondary" disabled>Previous</button>
                    <button class="btn primary" onclick="nextSection()">Next: Skill Balance ‚Üí</button>
                </div>
            </div>

            <div class="survey-section hidden" id="section2">
                <div class="section-title">AI Dependency vs. Skill Development Balance</div>
                
                <div class="question">
                    <div class="question-text">8. I'm confident debugging code without AI assistance</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(8, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(8, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(8, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(8, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(8, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">9. I understand the reasoning behind AI-suggested solutions</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(9, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(9, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(9, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(9, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(9, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">10. I can explain AI-generated code to colleagues</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(10, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(10, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(10, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(10, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(10, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">11. I actively research concepts behind AI suggestions</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(11, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(11, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(11, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(11, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(11, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">12. AI helps me learn new technical concepts faster</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(12, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(12, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(12, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(12, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(12, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">13. I can evaluate whether an agent-generated PR meets our quality standards</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(13, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(13, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(13, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(13, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(13, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">14. I understand how MCP servers extend AI capabilities in our workflow</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(14, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(14, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(14, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(14, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(14, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn secondary" onclick="prevSection()">‚Üê Previous</button>
                    <button class="btn primary" onclick="nextSection()">Next: Learning Velocity ‚Üí</button>
                </div>
            </div>

            <!-- Section 3: Learning Velocity & Growth -->
            <div class="survey-section hidden" id="section3">
                <div class="progress-indicator">
                    <div class="category-label">Learning Velocity</div>
                    <div class="question-counter">Questions 15-19 of 31</div>
                </div>

                <div class="question">
                    <div class="question-text">15. I'm developing new skills through AI-assisted work</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(15, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(15, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(15, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(15, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(15, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">16. AI enables me to explore technologies I wouldn't otherwise try</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(16, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(16, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(16, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(16, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(16, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">17. I understand how AI-generated code fits into our architecture</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(17, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(17, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(17, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(17, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(17, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">18. I'm becoming more effective at prompting AI tools</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(18, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(18, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(18, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(18, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(18, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">19. My problem-solving skills are improving with AI assistance</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(19, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(19, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(19, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(19, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(19, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn secondary" onclick="prevSection()">‚Üê Previous</button>
                    <button class="btn primary" onclick="nextSection()">Next: Code Quality ‚Üí</button>
                </div>
            </div>

            <!-- Section 4: Code Quality Confidence -->
            <div class="survey-section hidden" id="section4">
                <div class="progress-indicator">
                    <div class="category-label">Code Quality Confidence</div>
                    <div class="question-counter">Questions 20-24 of 31</div>
                </div>

                <div class="question">
                    <div class="question-text">20. I'm confident in the security of AI-generated code after my review</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(20, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(20, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(20, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(20, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(20, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">21. AI-generated code meets our quality standards</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(21, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(21, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(21, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(21, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(21, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">22. Our code review process effectively catches AI-generated issues</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(22, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(22, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(22, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(22, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(22, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">23. I'm comfortable shipping AI-assisted code to production</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(23, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(23, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(23, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(23, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(23, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">24. AI helps improve overall code quality in our projects</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(24, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(24, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(24, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(24, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(24, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn secondary" onclick="prevSection()">‚Üê Previous</button>
                    <button class="btn primary" onclick="nextSection()">Next: Team Process ‚Üí</button>
                </div>
            </div>

            <!-- Section 5: Team Collaboration & Process -->
            <div class="survey-section hidden" id="section5">
                <div class="progress-indicator">
                    <div class="category-label">Team Collaboration & Process</div>
                    <div class="question-counter">Questions 25-31 of 31</div>
                </div>

                <div class="question">
                    <div class="question-text">25. My team shares effective AI practices and learnings</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(25, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(25, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(25, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(25, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(25, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">26. We have clear guidelines for AI tool usage</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(26, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(26, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(26, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(26, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(26, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">27. AI tools enhance rather than replace team collaboration</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(27, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(27, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(27, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(27, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(27, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">28. I receive adequate support when AI tools don't work as expected</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(28, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(28, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(28, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(28, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(28, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">29. Our AI workflow integrates well with existing processes</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(29, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(29, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(29, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(29, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(29, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">30. Our team has agreed-on practices for reviewing agent-authored code</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(30, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(30, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(30, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(30, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(30, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">31. We have a shared understanding of tasks that are appropriate for autonomous agents</div>
                    <div class="rating-scale">
                        <div class="rating-option" onclick="setRating(31, 1)">1<br><small>Strongly Disagree</small></div>
                        <div class="rating-option" onclick="setRating(31, 2)">2<br><small>Disagree</small></div>
                        <div class="rating-option" onclick="setRating(31, 3)">3<br><small>Neutral</small></div>
                        <div class="rating-option" onclick="setRating(31, 4)">4<br><small>Agree</small></div>
                        <div class="rating-option" onclick="setRating(31, 5)">5<br><small>Strongly Agree</small></div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn secondary" onclick="prevSection()">‚Üê Previous</button>
                    <button class="btn primary" onclick="nextSection()">Next: Open Response ‚Üí</button>
                </div>
            </div>

            <!-- Section 6: Open Response Questions -->
            <div class="survey-section hidden" id="section6">
                <div class="progress-indicator">
                    <div class="category-label">Open Response Questions</div>
                    <div class="question-counter">Final Questions</div>
                </div>

                <div class="open-question">
                    <label for="q32">32. What's your most significant AI success story from the past month?</label>
                    <textarea id="q32" name="q32" rows="4" placeholder="Share a specific example of how AI helped you succeed..."></textarea>
                </div>

                <div class="open-question">
                    <label for="q33">33. What's your biggest frustration or challenge with AI tools?</label>
                    <textarea id="q33" name="q33" rows="4" placeholder="Describe any difficulties or limitations you've encountered..."></textarea>
                </div>

                <div class="open-question">
                    <label for="q34">34. What AI capability or improvement would have the highest impact on your work?</label>
                    <textarea id="q34" name="q34" rows="4" placeholder="What would make the biggest difference to your productivity or satisfaction?"></textarea>
                </div>

                <div class="open-question">
                    <label for="q35">35. How has your relationship with AI tools changed over the past quarter?</label>
                    <textarea id="q35" name="q35" rows="4" placeholder="Reflect on your evolving feelings, skills, and confidence with AI..."></textarea>
                </div>

                <div class="open-question">
                    <label for="openFeedback">36. Additional Comments & Suggestions</label>
                    <textarea id="openFeedback" name="openFeedback" rows="6" placeholder="Share any additional thoughts, suggestions, or experiences that weren't covered in the previous questions. This is your space for open-ended feedback about your developer experience with AI tools..."></textarea>
                </div>

                <div class="navigation-buttons">
                    <button class="btn secondary" onclick="prevSection()">‚Üê Previous</button>
                    <button class="btn primary" onclick="showResults()">View Results ‚Üí</button>
                </div>
            </div>
            
            <!-- Results Section -->
            <div class="results-section hidden" id="resultsSection">
                <div class="section-title">Your Developer Experience Health Report</div>
                
                <div class="health-status">
                    <div class="status-badge" id="overallStatus">Complete Survey</div>
                    <div id="statusDescription"></div>
                </div>

                <div id="redFlags" class="red-flags hidden">
                    <h3>‚ö†Ô∏è Red Flag Indicators</h3>
                    <div id="redFlagsList"></div>
                </div>

                <div class="ai-analysis-section" id="aiAnalysisSection">
                    <h3>ü§ñ AI-Powered Analysis</h3>
                    <div class="analysis-status" id="analysisStatus">
                        <button class="btn primary" onclick="runAIAnalysis()">üîç Generate AI Insights</button>
                        <div class="analysis-loading hidden" id="analysisLoading">
                            <div class="loading-spinner"></div>
                            <span>Analyzing your responses with AI...</span>
                        </div>
                    </div>
                    <div class="ai-insights hidden" id="aiInsights">
                        <h4>üí° AI Insights & Patterns</h4>
                        <div id="aiInsightsContent"></div>
                    </div>
                </div>

                <div class="recommendations">
                    <h3>üìã Recommendations</h3>
                    <div id="recommendationsList"></div>
                </div>

                <div class="export-controls">
                    <button class="btn primary" onclick="exportReport()">üìä Export Report</button>
                    <button class="btn secondary" onclick="saveResponses()">üíæ Save Responses</button>
                    <button class="btn secondary" onclick="resetSurvey()">üîÑ Take Again</button>
                </div>
            </div>
        </main>

        <footer role="contentinfo">
            <p>
                Made with ‚ù§Ô∏è for education by
                <a href="https://twitter.com/acolombiadev" target="_blank" rel="noopener noreferrer">
                    Andrea Griffiths @acolombiadev
                </a>
            </p>
            <button class="btn btn-small" type="button" onclick="clearAllData()">Clear All Data</button>
        </footer>
    </div>

    <script>
        // Mobile navigation functionality
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.querySelector('.menu-toggle');
            const mobileMenu = document.querySelector('.mobile-menu');
            
            if (menuToggle && mobileMenu) {
                menuToggle.addEventListener('click', function() {
                    mobileMenu.classList.toggle('active');
                    menuToggle.classList.toggle('active');
                });
                
                // Close menu when clicking outside
                document.addEventListener('click', function(event) {
                    if (!event.target.closest('.mobile-nav') && mobileMenu.classList.contains('active')) {
                        mobileMenu.classList.remove('active');
                        menuToggle.classList.remove('active');
                    }
                });
            }
            
            // Mobile scroll progress indicator
            function updateMobileProgress() {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                
                const progressIndicator = document.getElementById('mobileProgressIndicator');
                if (progressIndicator) {
                    progressIndicator.style.width = scrollPercent + '%';
                }
                
                // Show/hide back to top button
                const backToTopButton = document.getElementById('backToTop');
                if (backToTopButton) {
                    if (scrollTop > 300) {
                        backToTopButton.classList.add('visible');
                    } else {
                        backToTopButton.classList.remove('visible');
                    }
                }
            }
            
            // Back to top functionality
            const backToTopButton = document.getElementById('backToTop');
            if (backToTopButton) {
                backToTopButton.addEventListener('click', function() {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }
            
            window.addEventListener('scroll', updateMobileProgress);
            // Initialize progress on load
            updateMobileProgress();
        });

        let currentSection = 1;
        let responses = {};
        let openResponses = {};
        const totalSections = 6; // 5 rating sections + 1 open response section

        function startSurvey() {
            document.getElementById('welcomeSection').classList.add('hidden');
            document.getElementById('progressSection').classList.remove('hidden');
            document.getElementById('progressSection').classList.add('active');
            
            // Show first section
            currentSection = 1;
            document.getElementById('section1').classList.remove('hidden');
            document.getElementById('section1').classList.add('active');
            
            updateSectionIndicator();
            updateProgress();
        }

        function setRating(questionId, value) {
            responses[questionId] = value;
            
            // Update UI
            const questionDiv = event.target.closest('.question');
            const options = questionDiv.querySelectorAll('.rating-option');
            options.forEach(option => option.classList.remove('selected'));
            event.target.classList.add('selected');
            
            updateProgress();
            updateCategoryScores();
        }

        function updateProgress() {
            const totalQuestions = 31; // Adjust based on actual number
            const answered = Object.keys(responses).length;
            const percentage = Math.round((answered / totalQuestions) * 100);
            
            document.getElementById('progressText').textContent = `${percentage}%`;
            document.getElementById('progressFill').style.width = `${percentage}%`;
        }

        function updateSectionIndicator() {
            document.getElementById('currentSectionNum').textContent = currentSection;
            document.getElementById('totalSectionsNum').textContent = totalSections;
        }

        function updateCategoryScores() {
            // AI Integration: Questions 1-5
            const integration = calculateCategoryAverage([1, 2, 3, 4, 5, 6, 7]);
            updateCategoryDisplay('integrationScore', integration);
            
            // Skill Balance: Questions 8-12  
            const skill = calculateCategoryAverage([8, 9, 10, 11, 12, 13, 14]);
            updateCategoryDisplay('skillScore', skill);

            // Learning Velocity: Questions 15-19
            const learning = calculateCategoryAverage([15, 16, 17, 18, 19]);
            updateCategoryDisplay('learningScore', learning);

            // Code Quality: Questions 20-24
            const quality = calculateCategoryAverage([20, 21, 22, 23, 24]);
            updateCategoryDisplay('qualityScore', quality);

            // Team Process: Questions 25-31
            const team = calculateCategoryAverage([25, 26, 27, 28, 29, 30, 31]);
            updateCategoryDisplay('teamScore', team);
        }

        function calculateCategoryAverage(questionIds) {
            const values = questionIds.map(id => responses[id]).filter(v => v !== undefined);
            if (values.length === 0) return null;
            return (values.reduce((sum, v) => sum + v, 0) / values.length).toFixed(1);
        }

        function updateCategoryDisplay(elementId, score) {
            const element = document.getElementById(elementId);
            if (score === null) {
                element.textContent = '-';
                element.className = 'category-value';
            } else {
                element.textContent = score;
                if (score >= 3.5) element.className = 'category-value healthy';
                else if (score >= 2.5) element.className = 'category-value at-risk';
                else element.className = 'category-value critical';
            }
        }

        function nextSection() {
            if (currentSection < totalSections) {
                // Hide current section
                const currentSectionElement = document.getElementById(`section${currentSection}`);
                currentSectionElement.classList.remove('active');
                currentSectionElement.classList.add('hidden');
                
                currentSection++;
                
                if (currentSection <= totalSections) {
                    const nextSectionElement = document.getElementById(`section${currentSection}`);
                    if (nextSectionElement) {
                        nextSectionElement.classList.remove('hidden');
                        nextSectionElement.classList.add('active');
                        updateSectionIndicator();
                    } else {
                        // Show results if no more sections
                        showResults();
                    }
                } else {
                    showResults();
                }
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function prevSection() {
            if (currentSection > 1) {
                // Hide current section
                const currentSectionElement = document.getElementById(`section${currentSection}`);
                currentSectionElement.classList.remove('active');
                currentSectionElement.classList.add('hidden');
                
                currentSection--;
                
                // Show previous section
                const prevSectionElement = document.getElementById(`section${currentSection}`);
                prevSectionElement.classList.remove('hidden');
                prevSectionElement.classList.add('active');
                
                updateSectionIndicator();
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function showResults() {
            // Collect open responses before showing results
            collectOpenResponses();
            
            // Hide current section
            const currentSectionElement = document.getElementById(`section${currentSection}`);
            currentSectionElement.classList.remove('active');
            currentSectionElement.classList.add('hidden');
            
            // Show results
            document.getElementById('resultsSection').classList.remove('hidden');
            document.getElementById('resultsSection').classList.add('active');
            
            generateHealthReport();
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function generateHealthReport() {
            // Calculate all category averages
            const integration = calculateCategoryAverage([1, 2, 3, 4, 5, 6, 7]);
            const skill = calculateCategoryAverage([8, 9, 10, 11, 12]);
            const learning = calculateCategoryAverage([15, 16, 17, 18, 19]);
            const quality = calculateCategoryAverage([20, 21, 22, 23, 24]);
            const team = calculateCategoryAverage([25, 26, 27, 28, 29, 30, 31]);
            
            // Update category displays
            updateCategoryDisplay('integrationScore', integration);
            updateCategoryDisplay('skillScore', skill);
            updateCategoryDisplay('learningScore', learning);
            updateCategoryDisplay('qualityScore', quality);
            updateCategoryDisplay('teamScore', team);
            
            // Calculate overall health status
            const scores = [integration, skill, learning, quality, team].filter(s => s !== null);
            if (scores.length === 0) return;
            
            const overall = scores.reduce((sum, s) => sum + parseFloat(s), 0) / scores.length;
            
            let status, statusClass, description;
            if (overall >= 4.0) {
                status = "Excellent Health";
                statusClass = "healthy";
                description = "Your AI workflow health is excellent. Share your practices with other teams.";
            } else if (overall >= 3.5) {
                status = "Good Health";
                statusClass = "healthy";
                description = "Your AI workflows are healthy with minor areas for improvement.";
            } else if (overall >= 2.5) {
                status = "At Risk";
                statusClass = "at-risk";
                description = "Some areas need attention to maintain healthy AI adoption.";
            } else {
                status = "Critical";
                statusClass = "critical";
                description = "Immediate intervention required to address AI workflow issues.";
            }
            
            document.getElementById('overallStatus').textContent = status;
            document.getElementById('overallStatus').className = `status-badge ${statusClass}`;
            document.getElementById('statusDescription').textContent = description;
            
            // Check for red flags
            checkRedFlags(integration, skill, learning, quality, team);
            generateRecommendations(overall);
        }

        function checkRedFlags(integration, skill, learning, quality, team) {
            const redFlags = [];
            
            if (integration > 4.0 && skill < 3.0) {
                redFlags.push("Over-dependence risk: High AI integration but low skill balance");
            }
            if (integration > 4.0 && team < 3.0) {
                redFlags.push("Agent autonomy risk: High integration but weak team processes/guardrails");
            }
            
            if (quality < 3.0) {
                redFlags.push("Security/quality risk: Low confidence in AI-generated code quality");
            }
            
            if (learning < 2.5) {
                redFlags.push("Skill development stagnation: Very low learning velocity");
            }
            
            if (team < 2.5) {
                redFlags.push("Team collaboration issues: Poor AI workflow integration");
            }

            if (responses[7] && responses[7] <= 2) {
                redFlags.push("Agent mode guidance missing: unclear when to use agent vs. edit/chat");
            }

            if (responses[30] && responses[30] <= 2) {
                redFlags.push("Review gap: no agreed practices for agent-authored code");
            }

            if (responses[14] && responses[14] <= 2) {
                redFlags.push("MCP literacy gap: team cannot evaluate server capabilities safely");
            }
            
            if (redFlags.length > 0) {
                document.getElementById('redFlags').classList.remove('hidden');
                document.getElementById('redFlagsList').innerHTML = redFlags.map(flag => 
                    `<div class="recommendation-item">${flag}</div>`
                ).join('');
            }
        }

        function generateRecommendations(overall) {
            let recommendations = [];
            
            if (overall >= 4.0) {
                recommendations.push("Continue current approach and share successful practices");
                recommendations.push("Consider mentoring other teams in AI adoption");
            } else if (overall >= 3.0) {
                recommendations.push("Review specific low-scoring areas for targeted improvements");
                recommendations.push("Increase knowledge sharing activities within the team");
            } else if (overall >= 2.0) {
                recommendations.push("Implement immediate training and support programs");
                recommendations.push("Evaluate current tools and processes");
                recommendations.push("Provide one-on-one coaching for struggling team members");
            } else {
                recommendations.push("Halt AI adoption expansion until issues are resolved");
                recommendations.push("Launch comprehensive training program");
                recommendations.push("Consider tool replacement and leadership escalation");
            }
            
            document.getElementById('recommendationsList').innerHTML = recommendations.map(rec => 
                `<div class="recommendation-item">‚Ä¢ ${rec}</div>`
            ).join('');
        }

        function exportReport() {
            const timestamp = new Date().toLocaleDateString();
            const report = `Developer Experience Health Check Report
Generated: ${timestamp}

Category Scores:
‚Ä¢ AI Integration: ${document.getElementById('integrationScore').textContent}/5.0
‚Ä¢ Skill Balance: ${document.getElementById('skillScore').textContent}/5.0
‚Ä¢ Learning Velocity: ${document.getElementById('learningScore').textContent}/5.0
‚Ä¢ Quality Confidence: ${document.getElementById('qualityScore').textContent}/5.0
‚Ä¢ Team Process: ${document.getElementById('teamScore').textContent}/5.0

Overall Status: ${document.getElementById('overallStatus').textContent}

Generated by: Pair to Peer AI Workflows Developer Experience Tool`;

            const blob = new Blob([report], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `dx-health-check-${timestamp.replace(/\//g, '-')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function saveResponses() {
            localStorage.setItem('dxHealthResponses', JSON.stringify({
                responses,
                openResponses,
                timestamp: new Date().toISOString()
            }));
            alert('üíæ Responses saved!');
        }

        function resetSurvey() {
            if (confirm('Reset all responses? This cannot be undone.')) {
                // Reset all data
                currentSection = 1;
                responses = {};
                openResponses = {};
                
                // Hide all sections
                for (let i = 1; i <= totalSections; i++) {
                    document.getElementById(`section${i}`).classList.remove('active');
                    document.getElementById(`section${i}`).classList.add('hidden');
                }
                document.getElementById('resultsSection').classList.remove('active');
                document.getElementById('resultsSection').classList.add('hidden');
                document.getElementById('progressSection').classList.remove('active');
                document.getElementById('progressSection').classList.add('hidden');
                
                // Show welcome section
                document.getElementById('welcomeSection').classList.remove('hidden');
                
                // Clear all selections
                document.querySelectorAll('.rating-option.selected').forEach(option => {
                    option.classList.remove('selected');
                });
                
                // Clear all form inputs
                document.querySelectorAll('textarea').forEach(textarea => {
                    textarea.value = '';
                });
                
                // Reset progress
                document.getElementById('progressText').textContent = '0%';
                document.getElementById('progressFill').style.width = '0%';
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Auto-update progress
        setInterval(updateProgress, 1000);

        // Collect open responses from textarea elements
        function collectOpenResponses() {
            openResponses = {
                'AI Success Story': document.getElementById('q32').value,
                'Biggest Frustration': document.getElementById('q33').value,
                'High Impact Improvement': document.getElementById('q34').value,
                'Relationship Change': document.getElementById('q35').value,
                'Additional Comments': document.getElementById('openFeedback').value
            };
        }

        // Run AI Analysis using GitHub Actions workflow
        async function runAIAnalysis() {
            // Collect latest responses
            collectOpenResponses();

            // Show loading state
            document.getElementById('analysisStatus').style.display = 'none';
            document.getElementById('analysisLoading').classList.remove('hidden');

            try {
                // Prepare data for analysis
                const analysisData = {
                    scores: responses,
                    openResponses: openResponses
                };

                // Open GitHub workflow in new tab with pre-filled data
                const workflowUrl = 'https://github.com/AndreaGriffiths11/pair-to-peer-ai-workflows/actions/workflows/ai-analysis.yml';

                // Show instructions with easy copy-paste
                document.getElementById('aiInsightsContent').innerHTML = `
                    <div style="background: var(--primary-color); color: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; text-align: center;">
                        <h4>üöÄ Ready for AI Analysis!</h4>
                        <p>Click below to run your analysis - data is ready to paste</p>
                    </div>

                    <div style="background: var(--surface-elevated); padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                            <span style="background: var(--primary-color); color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9rem;">1</span>
                            <strong>Open the analysis workflow:</strong>
                        </div>
                        <a href="${workflowUrl}" target="_blank" style="display: inline-block; background: var(--success-color); color: white; padding: 1rem 2rem; border-radius: 6px; text-decoration: none; font-weight: 600; font-size: 1.1rem;">
                            üîó Open AI Analysis Workflow
                        </a>
                    </div>

                    <div style="background: var(--surface-elevated); padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                            <span style="background: var(--primary-color); color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9rem;">2</span>
                            <strong>Copy your survey data:</strong>
                        </div>
                        <textarea readonly style="width: 100%; height: 120px; font-family: monospace; font-size: 0.85rem; padding: 1rem; border: 2px solid var(--primary-color); border-radius: 6px; resize: vertical;" onclick="this.select(); navigator.clipboard.writeText(this.value); alert('‚úÖ Data copied to clipboard!');">${JSON.stringify(analysisData, null, 2)}</textarea>
                        <p style="color: var(--text-muted); font-size: 0.9rem; margin-top: 0.5rem;">
                            üí° <strong>Tip:</strong> Click the text area above to automatically copy the data!
                        </p>
                    </div>

                    <div style="background: var(--surface-elevated); padding: 1.5rem; border-radius: 8px;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                            <span style="background: var(--primary-color); color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9rem;">3</span>
                            <strong>Run the analysis:</strong>
                        </div>
                        <div style="color: var(--text-secondary);">
                            ‚Ä¢ Click <strong>"Run workflow"</strong> button<br>
                            ‚Ä¢ Paste the data into the <strong>"analysis_data"</strong> field<br>
                            ‚Ä¢ Click <strong>"Run workflow"</strong> to start analysis<br>
                            ‚Ä¢ Results will appear in the workflow logs within 1-2 minutes
                        </div>
                    </div>
                `;
                document.getElementById('aiInsights').classList.remove('hidden');

            } catch (error) {
                console.error('AI Analysis failed:', error);

                // Show retry option
                document.getElementById('aiInsightsContent').innerHTML = `
                    <div style="background: var(--warning-color); color: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <strong>‚ö†Ô∏è Analysis Failed</strong><br>
                        ${error.message}
                    </div>
                    <div style="text-align: center; padding: 1rem;">
                        <button onclick="runAIAnalysis()" style="background: var(--primary-color); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                            üîÑ Try Again
                        </button>
                    </div>
                `;

                document.getElementById('aiInsights').classList.remove('hidden');
            } finally {
                // Hide loading state
                document.getElementById('analysisLoading').classList.add('hidden');
            }
        }

        // Poll for analysis results
        async function pollForAnalysisResults() {
            const maxAttempts = 30; // 5 minutes max (10 second intervals)
            let attempts = 0;

            const pollInterval = setInterval(async () => {
                attempts++;

                try {
                    // Check recent workflow runs
                    const response = await fetch('https://api.github.com/repos/AndreaGriffiths11/pair-to-peer-ai-workflows/actions/runs?per_page=5');

                    if (!response.ok) {
                        throw new Error('Failed to check workflow status');
                    }

                    const data = await response.json();
                    const recentRuns = data.workflow_runs.filter(run =>
                        run.name === 'AI Developer Experience Analysis' &&
                        new Date(run.created_at) > new Date(Date.now() - 10 * 60 * 1000) // Last 10 minutes
                    );

                    for (const run of recentRuns) {
                        if (run.status === 'completed') {
                            clearInterval(pollInterval);

                            if (run.conclusion === 'success') {
                                await fetchAnalysisResults(run.id);
                            } else {
                                showAnalysisError('Workflow failed. Please try manual analysis.');
                            }
                            return;
                        }
                    }

                    // Update progress message
                    if (attempts < maxAttempts) {
                        document.getElementById('aiInsightsContent').innerHTML = `
                            <div style="text-align: center; padding: 2rem;">
                                <div class="loading-spinner" style="margin: 0 auto 1rem;"></div>
                                <h4>ü§ñ AI Analysis in Progress</h4>
                                <p>Your responses are being analyzed with advanced AI models...</p>
                                <p style="color: var(--text-muted); font-size: 0.9rem;">Checking for results... (${attempts}/${maxAttempts})</p>
                            </div>
                        `;
                    }

                } catch (error) {
                    console.error('Polling error:', error);
                }

                if (attempts >= maxAttempts) {
                    clearInterval(pollInterval);
                    showAnalysisError('Analysis timed out. Please try manual analysis.');
                }
            }, 10000); // Check every 10 seconds
        }

        // Fetch analysis results from workflow artifacts
        async function fetchAnalysisResults(runId) {
            try {
                const artifactsResponse = await fetch(`https://api.github.com/repos/AndreaGriffiths11/pair-to-peer-ai-workflows/actions/runs/${runId}/artifacts`);

                if (!artifactsResponse.ok) {
                    throw new Error('Failed to fetch artifacts');
                }

                const artifactsData = await artifactsResponse.json();
                const analysisArtifact = artifactsData.artifacts.find(artifact =>
                    artifact.name.startsWith('analysis-results-')
                );

                if (!analysisArtifact) {
                    throw new Error('Analysis results not found');
                }

                // For now, show success message and guide user to download
                // Note: Direct artifact download requires authentication
                displayAnalysisSuccess(runId, analysisArtifact.name);

            } catch (error) {
                console.error('Failed to fetch results:', error);
                showAnalysisError('Analysis completed but results could not be retrieved automatically.');
            }
        }

        // Display successful analysis completion
        function displayAnalysisSuccess(runId, artifactName) {
            document.getElementById('aiInsightsContent').innerHTML = `
                <div style="text-align: center; padding: 2rem; background: var(--success-color); color: white; border-radius: 8px; margin-bottom: 1rem;">
                    <h4>‚úÖ AI Analysis Complete!</h4>
                    <p>Your developer experience analysis has been successfully generated.</p>
                </div>
                <div style="background: var(--surface-elevated); padding: 1rem; border-radius: 8px;">
                    <strong>üìä Results Available:</strong><br><br>
                    <a href="https://github.com/AndreaGriffiths11/pair-to-peer-ai-workflows/actions/runs/${runId}" target="_blank" style="display: inline-block; background: var(--primary-color); color: white; padding: 0.75rem 1.5rem; border-radius: 6px; text-decoration: none; font-weight: 600; margin-right: 1rem;">
                        üîó View Workflow Results
                    </a>
                    <p style="margin-top: 1rem; color: var(--text-muted); font-size: 0.9rem;">
                        Click the link above to view detailed AI insights, download the analysis report, or view the full workflow logs.
                    </p>
                </div>
            `;
        }

        // Show analysis error
        function showAnalysisError(message) {
            document.getElementById('aiInsightsContent').innerHTML = `
                <div style="background: var(--danger-color); color: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <strong>‚ùå Analysis Error</strong><br>
                    ${message}
                </div>
                <div style="text-align: center; padding: 1rem;">
                    <button onclick="runAIAnalysis()" style="background: var(--primary-color); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                        üîÑ Try Again
                    </button>
                </div>
            `;
        }

        // Copy data to clipboard
        function copyToClipboard(encodedData) {
            const data = decodeURIComponent(encodedData);
            navigator.clipboard.writeText(data).then(() => {
                alert('Survey data copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy: ', err);
                // Fallback: select the textarea
                const textarea = document.querySelector('textarea[readonly]');
                textarea.select();
                alert('Please manually copy the selected text.');
            });
        }

        // Check for analysis results
        async function checkForResults(analysisId) {
            try {
                // Look for recent workflow runs
                const workflowRunsUrl = 'https://api.github.com/repos/AndreaGriffiths11/pair-to-peer-ai-workflows/actions/runs?per_page=5';

                const response = await fetch(workflowRunsUrl);

                if (!response.ok) {
                    throw new Error('Unable to check workflow status');
                }

                const data = await response.json();
                const recentRuns = data.workflow_runs.filter(run =>
                    run.name === 'AI Developer Experience Analysis' &&
                    run.status === 'completed' &&
                    run.conclusion === 'success'
                );

                if (recentRuns.length === 0) {
                    alert('No completed analysis found. Please make sure the workflow has finished running.');
                    return;
                }

                // Try to fetch the most recent result
                const latestRun = recentRuns[0];
                const resultUrl = `https://andreagriffiths11.github.io/pair-to-peer-ai-workflows/results/analysis-${latestRun.id}.json`;

                const resultResponse = await fetch(resultUrl);

                if (resultResponse.ok) {
                    const results = await resultResponse.json();
                    displayAIInsights(results);
                } else {
                    document.getElementById('aiInsightsContent').innerHTML = `
                        <strong>‚è≥ Results Processing</strong><br><br>
                        The workflow completed successfully, but results are still being processed.<br>
                        Please wait a moment and try again.<br><br>
                        <strong>Run ID:</strong> ${latestRun.id}<br>
                        <button onclick="checkForResults('${analysisId}')" style="margin-top: 1rem; padding: 0.5rem 1rem; background: var(--primary-color); color: white; border: none; border-radius: 4px; cursor: pointer;">
                            üîÑ Check Again
                        </button>
                    `;
                }

            } catch (error) {
                console.error('Error checking results:', error);
                alert('Error checking for results. Please try again or check the GitHub Actions page manually.');
            }
        }


        // Display AI insights in the results
        function displayAIInsights(analysisResult) {
            const insightsContent = document.getElementById('aiInsightsContent');
            
            // Format the AI insights for better readability
            let formattedInsights = analysisResult.aiInsights;
            
            // Add analysis metadata
            const metadata = `
                <div style="border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; margin-bottom: 1.5rem; font-size: 0.9rem; color: var(--text-secondary);">
                    <strong>Analysis Generated:</strong> ${new Date(analysisResult.analysis.timestamp).toLocaleString()}<br>
                    <strong>Model:</strong> ${analysisResult.analysis.model}<br>
                    <strong>Overall Score:</strong> ${analysisResult.overallScore.toFixed(1)}/5.0
                </div>
            `;
            
            insightsContent.innerHTML = metadata + formattedInsights;
            document.getElementById('aiInsights').classList.remove('hidden');
        }

        // Clear all data function
        function clearAllData() {
            if (confirm('Are you sure you want to clear all stored data? This will remove any saved progress and cannot be undone.')) {
                try {
                    localStorage.clear();
                    sessionStorage.clear();
                    alert('All data has been cleared successfully.');
                    // Reset to initial state
                    location.reload();
                } catch (error) {
                    alert('Error clearing data: ' + error.message);
                }
            }
        }
    </script>
</body>
</html>
